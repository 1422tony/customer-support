<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta property="og:title" content="é ‚ç´šé–‹ç™¼è€…æ©Ÿæ¢°éµç›¤ (æ¸¬è©¦å•†å“)">
    <meta property="og:image" content="https://placehold.co/600x400/0084ff/ffffff?text=Keyboard+Product">
    
    <title>å®¢æœç³»çµ±æ¸¬è©¦é é¢ (HMACç‰ˆ)</title>
    <style>
        body { font-family: "Microsoft JhengHei", sans-serif; margin: 0; padding: 0; background-color: #f0f2f5; }
        .container { max-width: 800px; margin: 50px auto; padding: 30px; background: white; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); }
        h1 { color: #333; margin-top: 0; }
        p { line-height: 1.6; color: #666; }
        
        .product-card { border: 1px solid #eee; padding: 20px; border-radius: 12px; margin-top: 20px; display: flex; align-items: center; gap: 20px; background: #fafafa; }
        .product-img { width: 120px; height: 120px; border-radius: 8px; object-fit: cover; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        
        .btn { padding: 12px 24px; background: #0084ff; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 16px; transition: 0.2s; }
        .btn:hover { background: #006ecd; }
        
        /* æç¤ºå€å¡Š */
        .notice { background: #fff3cd; color: #856404; padding: 15px; border-radius: 6px; margin-bottom: 20px; font-size: 14px; border: 1px solid #ffeeba; line-height: 1.5; }
        code { background: #f8f9fa; padding: 2px 5px; border-radius: 3px; color: #e83e8c; font-family: monospace; }
    </style>
</head>
<body>

    <div class="container">
        <h1>ğŸ›’ é–‹ç™¼æ¸¬è©¦å°ˆç”¨åº—</h1>
        
        <div class="notice">
            <strong>âš ï¸ é–‹ç™¼è€…æ³¨æ„ï¼š</strong><br>
            æ­¤é é¢åŒ…å« JavaScript æ¨¡æ“¬å¾Œç«¯ HMAC åŠ å¯†ï¼Œæ–¹ä¾¿æ‚¨æ¸¬è©¦é€£ç·šã€‚<br>
            è«‹ç¢ºèªä¸‹æ–¹çš„ <code>secretKey</code> èˆ‡æ‚¨ <code>server.js</code> å…§çš„è¨­å®šä¸€è‡´ï¼
        </div>

        <p>å•†åº— IDï¼š<code>test</code> | ä½¿ç”¨è€…ï¼š<code>user_sim_001</code></p>
        
        <div class="product-card">
            <img src="https://placehold.co/600x400/0084ff/ffffff?text=Keyboard+Product" class="product-img" alt="å•†å“åœ–">
            
            <div>
                <h3 style="margin: 0 0 10px 0;">é ‚ç´šé–‹ç™¼è€…æ©Ÿæ¢°éµç›¤</h3>
                <p style="margin: 0 0 15px 0;">é€™æ˜¯ä¸€å€‹æ¨¡æ“¬å•†å“é ï¼ŒWidget æœƒè‡ªå‹•æŠ“å–æ¨™é¡Œèˆ‡åœ–ç‰‡å‚³å›å¾Œå°ã€‚</p>
                <p style="color: #e74c3c; font-weight: bold; font-size: 1.2em;">$4,999</p>
                <button class="btn">åŠ å…¥è³¼ç‰©è»Š</button>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>

    <script>
        // --- æ¨¡æ“¬ Liquid è®Šæ•¸ ---
        var shopId = "test";
        var token = "9999"; 
        var userId = "user_sim_001";
        var userName = "æ¨¡æ“¬å®¢æˆ¶å°æ˜";
        
        // â˜…â˜…â˜… è«‹ä¿®æ”¹é€™è£¡ï¼šå¡«å…¥ server.js ä¸­è¨­å®šçµ¦ 'test' å•†åº—çš„ Secret Key â˜…â˜…â˜…
        // å¦‚æœæ‚¨åœ¨ server.js ç”¨äº† randomBytesï¼Œè«‹å» Render Logs è¤‡è£½å‡ºä¾†è²¼åœ¨é€™è£¡
        // å¦‚æœæ‚¨åœ¨ server.js ç”¨äº†å›ºå®šå­—ä¸²ï¼Œè«‹ç›´æ¥å¡«å…¥
        var secretKey = "my_super_secret_key_2025"; 
        
        // è¨ˆç®—ç°½ç« : HMAC-SHA256( userId, secretKey )
        var signature = CryptoJS.HmacSHA256(userId, secretKey).toString(CryptoJS.enc.Hex);
        
        console.log("------------------------------------------------");
        console.log("æ¸¬è©¦ç’°å¢ƒæ¨¡æ“¬æ•¸æ“š:");
        console.log("User ID:", userId);
        console.log("Secret Key:", secretKey);
        console.log("Generated Signature:", signature);
        console.log("------------------------------------------------");

        window.ChatWidgetConfig = {
            shopId: shopId,
            token: token,
            userId: userId,
            userName: userName,
            signature: signature, // å¸¶ä¸Šç°½ç« 

            // é›¢ç·šè‡ªå‹•å›å¾©è¨­å®š
            autoReplyEnabled: true,
            startHour: 9,
            endHour: 18,
            offlineMsg: "é€™æ˜¯æ¸¬è©¦åº—çš„è‡ªå‹•å›å¾©ï¼šç¾åœ¨ä¸‹ç­å›‰ï¼"
        };
    </script>

    <script src="/widget.js" async></script>

</body>
</html>